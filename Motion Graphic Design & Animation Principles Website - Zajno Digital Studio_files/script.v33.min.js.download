gsap.registerPlugin(ScrollTrigger, MotionPathPlugin, CustomEase, Observer),
    window.addEventListener("load", async function () {
        const e = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),
            t = (navigator.userAgent.match(/Version\/[\d\.]+.*Safari/), !!navigator.userAgent.match(/Firefox/));
        setTimeout(() => {
            window.scrollTo(0, 0), document.querySelector("body").scrollTo(0, 0), ScrollTrigger.refresh();
        }, 100);
        const o = window.innerHeight,
            n = window.innerWidth;
        ifvisible.setIdleDuration(4);
        const a = gsap
            .timeline({ repeat: -1, paused: !0 })
            .to(".ui-slide", { x: "-1.5%", duration: 0.4, ease: "none" })
            .to(".ui-slide", { x: "0%", duration: 0.4, ease: "none" })
            .to(".ui-slide", { x: "1.5%", duration: 0.4, ease: "none" })
            .to(".ui-slide", { x: "0%", duration: 0.4, ease: "none" });
        if (
            (ifvisible.on("idle", function () {
                a.restart();
            }),
            ifvisible.on("wakeup", function () {
                a.pause(0.8, !1);
            }),
            e && ScrollTrigger.normalizeScroll({ allowNestedScroll: !0 }),
            !e && "undefined" != typeof Lenis)
        ) {
            const e = (e, o, n) => {
                    t.raf(1e3 * e);
                },
                t = new Lenis({
                    duration: 2,
                    easing: (e) => Math.min(1, 1.001 - Math.pow(2, -10 * e)),
                    orientation: "vertical",
                    gestureOrientation: "vertical",
                    smoothWheel: !0,
                    wheelMultiplier: 1,
                    smoothTouch: !1,
                    touchMultiplier: 1,
                    infinite: !1,
                    normalizeWheel: !1,
                });
            t.on("scroll", ({ scroll: e, limit: t, velocity: o, direction: n, progress: r }) => {
                ScrollTrigger.update();
            }),
                gsap.ticker.add(e),
                ScrollTrigger.scrollerProxy(document.body, {
                    scrollTop(e) {
                        return arguments.length && (t.scroll = e), t.scroll;
                    },
                    getBoundingClientRect: () => ({
                        top: 0,
                        left: 0,
                        width: window.innerWidth,
                        height: window.innerHeight,
                    }),
                }),
                ScrollTrigger.defaults({ scroller: document.body });
        }
        const s = document.querySelector("#anim-ball"),
            l = document.querySelector(".is-hero .anim-ball-wrap").clientHeight;
        CustomEase.create(
            "bounce",
            "M0,0 C0.05222,-0.59802 0.31828,-1.38625 0.55039,0 0.65208,-0.78892 0.94566,-0.58262 1,1"
        ),
            CustomEase.create("bounceSmall", "M0,0,C0.052,-0.598,0.246,-0.72,0.336,0,0.498,-0.502,0.792,-0.482,1,1");
        const c = document.querySelector(".ui.first .ui-text").getBoundingClientRect().height;
        let u, d, g, p;
        n > 991
            ? gsap.set(".ui-wrap", { marginTop: "+=" + c / 2 })
            : (gsap.set(".ui-wrap", { marginTop: "" + (-1 * o) / 2 }), gsap.set(".ui-slide", { height: o })),
            (u =
                n > 991
                    ? document.querySelector(".embed-path")
                    : n <= 479
                      ? document.querySelector(".embed-path_mobile")
                      : document.querySelector(".embed-path_tablet")),
            ScrollTrigger.create({
                trigger: ".is-introduction",
                start: `top-=${l} center`,
                end: `top-=${l} center`,
                onEnter: () => {
                    gsap.timeline({ defaults: { overwrite: !0 } })
                        .to(".ball-divider.is-left", { duration: 1, scaleX: 0, transformOrigin: "center right" })
                        .to(".ball-divider.is-right", { duration: 1, scaleX: 0, transformOrigin: "center left" }, "<")
                        .to(".anim-ball-border", { scale: 0, duration: 0.5, transformOrigin: "center" });
                },
                onEnterBack: () => {
                    gsap.timeline({ defaults: { overwrite: !0 } })
                        .to(".anim-ball-border", { scale: 1, duration: 0.5, transformOrigin: "center" })
                        .to(".ball-divider.is-left", { duration: 1, scaleX: 1, transformOrigin: "center right" })
                        .to(".ball-divider.is-right", { duration: 1, scaleX: 1, transformOrigin: "center left" }, "<");
                },
            }),
            n > 991 ? gsap.set(".ui-slide", { width: "25vw" }) : gsap.set(".ui-slider", { marginLeft: "-100vw" }),
            n > 991
                ? ((d =
                      document.querySelector(".ui-text").getBoundingClientRect().height / 2 +
                      s.getBoundingClientRect().height / 18),
                  (g =
                      document.querySelector(".ui-slide").getBoundingClientRect().x +
                      document.querySelector(".ui-slide").getBoundingClientRect().width / 2 -
                      u.getBoundingClientRect().x -
                      s.getBoundingClientRect().height / 18))
                : ((d =
                      document.querySelector(".ui-text").getBoundingClientRect().height / 2 +
                      s.getBoundingClientRect().height / 9),
                  (g =
                      document.querySelector(".ui-slide").getBoundingClientRect().x +
                      document.querySelector(".ui-slide").getBoundingClientRect().width / 2 -
                      u.getBoundingClientRect().x));
        const h = [
            [0.1477, 0.43367, 0.61329, 1],
            [0.12336, 0.37553, 0.53228, 1],
            [0.13847, 0.348, 0.5061, 1],
        ];
        let m;
        n > 991
            ? ((p = document.getElementById("vrtx")), (m = h[0]))
            : n <= 479
              ? ((p = document.getElementById("vrtx-mobile")), (m = h[2]))
              : ((p = document.getElementById("vrtx-tablet")), (m = h[1]));
        let y = 0,
            v = 0.033 * n,
            f = u.offsetTop;
        function b() {
            gsap.set("#hero .anim-ball-sticky", { y: 0, ease: "none", overwrite: !0 }),
                gsap.set("#hero .anim-ball-wrap", { y: "50%", ease: "none", overwrite: !0 });
            gsap.set(s, { scale: 0, opacity: 0 });
        }
        y = n > 991 ? v + f : f;

        // Pre-calculate path start position for better performance
        let pathStartX, pathStartY;
        try {
            const pathElement = p;
            const pathLength = pathElement.getTotalLength();
            const startPoint = pathElement.getPointAtLength(0);
            pathStartX = startPoint.x;
            pathStartY = startPoint.y;
        } catch (e) {
            // Fallback positioning
            pathStartX = 480;
            pathStartY = 50;
        }

        // Position plane at path start and hide it initially - optimized
        gsap.set(s, {
            transformOrigin: "50% 50%", 
            scale: 0, 
            opacity: 0,
            visibility: "hidden",
            x: pathStartX,
            y: pathStartY,
            rotation: 0
        });

        let C = gsap
            .timeline({
                defaults: { ease: "none" },
                scrollTrigger: {
                    trigger: ".intro-wrap",
                    start: "top center",
                    end: n > 991 ? `bottom+=${c / 2} center` : "bottom center",
                    scrub: 1,
                },
                onEnter: () => {
                    // Don't call b() to avoid repositioning
                },
                onEnterBack: () => {
                    // Reset to path start position
                    gsap.set(s, { 
                        scale: 0, 
                        opacity: 0,
                        motionPath: {
                            path: p,
                            align: p,
                            alignOrigin: [0.5, 0.5],
                            start: 0,
                            end: 0,
                            immediateRender: true
                        }
                    });
                },
                onComplete: () => {
                    // Don't hide the plane - let it stay visible at the end
                    gsap.set(document.querySelector(".section-slide-wrap"), { alpha: 1 });
                },
            })
            // Smooth plane appearance with performance optimization
            .set(s, { 
                visibility: "visible",
                force3D: true
            })
            .to(s, {
                duration: 1.5,
                scale: 1,
                opacity: 1,
                rotation: 180,
                ease: "power1.out",
                force3D: true
            })
            .to(s, {
                duration: 6, // Slowed down a bit
                motionPath: {
                    path: p,
                    align: p,
                    alignOrigin: [0.5, 0.5],
                    start: 0,
                    end: m[0],
                    immediateRender: !0,
                    autoRotate: 90,
                },
                onStart: () => {
                    gsap.to(".is-also .anim-text", { y: 0, overwrite: !0 });
                },
                onReverseComplete: () => {
                    gsap.to(".is-also .anim-text", { y: "100%", overwrite: !0 });
                },
                onComplete: () => {
                    gsap.to(".is-controls .anim-text", { y: 0, overwrite: !0 });
                },
            })
            .to(s, {
                duration: 16, // Slowed down a bit
                motionPath: {
                    path: p,
                    align: p,
                    alignOrigin: [0.5, 0.5],
                    start: m[0],
                    end: m[1],
                    immediateRender: !0,
                    autoRotate: 90,
                },
                onReverseComplete: () => {
                    gsap.to(".is-controls .anim-text", { y: "100%", overwrite: !0 });
                },
                onComplete: () => {
                    gsap.to(".is-your .anim-text", { y: 0, overwrite: !0 });
                },
            })
            .to(s, {
                duration: 13, // Slowed down a bit
                motionPath: {
                    path: p,
                    align: p,
                    alignOrigin: [0.5, 0.5],
                    start: m[1],
                    end: m[2],
                    immediateRender: !0,
                    autoRotate: 90,
                },
                onReverseComplete: () => {
                    gsap.to(".is-your .anim-text", { y: "100%", overwrite: !0 });
                },
                onComplete: () => {
                    gsap.to(".is-attention .anim-text", { y: 0, overwrite: !0 });
                },
            })
            .to(s, {
                duration: 24, // Slowed down a bit
                motionPath: {
                    path: p,
                    align: p,
                    alignOrigin: [0.5, 0.5],
                    start: m[2],
                    end: m[3],
                    immediateRender: !0,
                    autoRotate: 90,
                },
                onReverseComplete: () => {
                    gsap.to(".is-attention .anim-text", { y: "100%", overwrite: !0 });
                    // Don't call b() here to avoid hiding the plane
                },
                onStart: () => {
                    // Don't call b() here either
                },
            });
        n > 991 &&
            C.to(s, { duration: 8, ease: "bounce", y: `+=${d}px` }).to(
                s,
                { duration: 8, ease: "none", x: `+=${g}px` },
                "<"
            );

        // Rest of your code continues below...
        const w = document.querySelectorAll(".ui").length;
        document.querySelectorAll(".ui").forEach((t, r, i) => {
            const a = t.querySelectorAll(".ui-slide").length;
            let l = 0.75;
            n <= 991 && (l = 1);
            let d = n * l + n * a * l + 0.5 * n * a + 0.25 * n;
            e && (d *= 3);
            const g = 0 != r ? i[r - 1] : null,
                p = u,
                h = document.querySelector("#introduction"),
                m = gsap
                    .timeline({
                        defaults: { ease: "none" },
                        scrollTrigger: {
                            trigger: t,
                            pin: !0,
                            anticipatePin: 1,
                            start: "top top",
                            end: () => "+" + d,
                            scrub: !0,
                            onLeaveBack: () => {
                                gsap.to("#hero .anim-ball-sticky", {
                                    y: 0,
                                    ease: "none",
                                    duration: 0.4,
                                    overwrite: !0,
                                });
                            },
                            onUpdate: (e) => {
                                let t;
                                (t =
                                    n > 991
                                        ? -1 *
                                          (h.offsetTop +
                                              p.offsetTop -
                                              window.pageYOffset +
                                              p.getBoundingClientRect().height -
                                              o / 2 +
                                              c / 2)
                                        : -1 *
                                          (h.offsetTop +
                                              p.offsetTop -
                                              window.pageYOffset +
                                              p.getBoundingClientRect().height -
                                              o / 2)),
                                    gsap.to("#hero .anim-ball-sticky", { y: t + "px", ease: "none", duration: 0.02 });
                            },
                        },
                        onStart: () => {
                            g &&
                                (gsap.set(g.querySelector(".ui-ball"), { alpha: 0 }),
                                gsap.set(t.querySelector(".section-slide-wrap"), { alpha: 1 }));
                        },
                        onReverseComplete: () => {
                            0 == r &&
                                (gsap.set(s, { display: "block" }),
                                gsap.set(document.querySelector(".section-slide-wrap"), { alpha: 0 })),
                                g &&
                                    (gsap.set(g.querySelector(".ui-ball"), { alpha: 1 }),
                                    gsap.set(t.querySelector(".section-slide-wrap"), { alpha: 0 }));
                        },
                    })
                    .to(t.querySelector(".ui-track"), { x: n > 991 ? "-75vw" : "-100vw", duration: 4, ease: "none" })
                    .to("#hero .anim-ball-wrap", { x: n > 991 ? "-=50vw" : "+=0", duration: 4, ease: "none" }, "<")
                    .to(t.querySelector(".ui-slider"), { marginLeft: 0, duration: 4, ease: "none" }, "<")
                    .fromTo(
                        t.querySelector(".ui-text"),
                        { clipPath: "polygon(0 0, 100% 0, 100% 100%, 0% 100%)" },
                        {
                            x: n > 991 ? "0" : "100vw",
                            y: n > 991 ? "0" : "-50%",
                            clipPath:
                                n > 991
                                    ? "polygon(0 0, 100% 0, 100% 100%, 0% 100%)"
                                    : "polygon(0 100%, 100% 100%, 100% 100%, 0% 100%)",
                            duration: 4,
                            ease: "none",
                        },
                        "<"
                    )
                    .to(t.querySelector(".ui-track"), { alpha: 1, duration: e ? 6 : 4, ease: "none" });
            function y(e) {
                const t = e.querySelector("video");
                gsap.to(e, {
                    clipPath: o > n ? `circle(${o}px at 50% 50%)` : `circle(${n}px at 50% 50%)`,
                    duration: 0.7,
                    ease: "none",
                }),
                    (t.currentTime = 0),
                    gsap.to(t, {
                        alpha: 1,
                        delay: 0.1,
                        duration: 0.6,
                        ease: "none",
                        onComplete: () => {
                            t.play();
                        },
                    });
            }
            function v(e) {
                const t = e.querySelector("video");
                gsap.to(e, { clipPath: "circle(0.09rem at 50% 50%)", duration: 0.7, ease: "none" }),
                    gsap.to(t, {
                        alpha: 0,
                        duration: 0.7,
                        ease: "none",
                        onComplete: () => {
                            t.pause();
                        },
                    });
            }
            if (
                (t.querySelectorAll(".ui-slide").forEach((o, i) => {
                    let s,
                        l,
                        c = 8 * i;
                    (c = e ? 8 * i + 2 : 8 * i),
                        (l = e ? 4 * (a - 1 - i) * 2 + 4 : 4 * (a - 1 - i) * 2 + 4 + 4),
                        (i != a - 2 && i != a - 1) || (l = 0),
                        (s = gsap
                            .timeline({
                                defaults: { ease: "none" },
                                scrollTrigger: { trigger: t, start: "top top", end: () => "+" + d, scrub: !0 },
                            })
                            .to(o, { width: n > 991 ? "75vw" : "100vw", duration: 4, ease: "none" }, c)
                            .to(o, {
                                alpha: 1,
                                duration: i != a - 1 || e ? 4 : 8,
                                ease: "none",
                                onStart: () => {
                                    y(o);
                                },
                                onComplete: () => {
                                    (r == w - 1 && i == a - 1) || v(o);
                                },
                                onReverseComplete: () => {
                                    v(o);
                                },
                            })
                            .to(o, {
                                alpha: 1,
                                duration: l,
                                ease: "none",
                                onReverseComplete: () => {
                                    y(o);
                                },
                            })),
                        i == a - 2 &&
                            (n > 991
                                ? s.to(o, { width: "25vw", duration: 4, ease: "none" })
                                : s.to(o, { alpha: 1, duration: 4, ease: "none" }),
                            s.to(o, { alpha: 1, duration: e ? 8 : 12, ease: "none" })),
                        i > 0 &&
                            i != a - 1 &&
                            m
                                .to(t.querySelector(".ui-track"), {
                                    x: n > 991 ? "-=75vw" : "-=100vw",
                                    duration: 4,
                                    ease: "none",
                                })
                                .to(t.querySelector(".ui-track"), { alpha: 1, duration: 4, ease: "none" }),
                        i == a - 1 &&
                            (n > 991
                                ? m
                                      .to(t.querySelector(".ui-track"), {
                                          alpha: 1,
                                          duration: e ? 8 : 12,
                                          ease: "none",
                                      })
                                      .to(t.querySelector(".ui-track"), { x: "-=25vw", duration: 4, ease: "none" })
                                : m
                                      .to(t.querySelector(".ui-track"), { x: "-=100vw", duration: 4, ease: "none" })
                                      .to(t.querySelector(".ui-track"), { alpha: 1, duration: 8, ease: "none" }),
                            s.to(o, { width: "100vw", duration: 4, ease: "none" }));
                }),
                r != w - 1)
            ) {
                const e = i[r + 1];
                let a;
                a = n > 991 ? 0.5 * o + (o - t.querySelector(".ui-text").getBoundingClientRect().height) / 2 + 18 : o;
                const s = 0.375 * n,
                    l =
                        t.querySelector(".ui-text").getBoundingClientRect().height / 2 -
                        document.querySelector(".ui-ball").getBoundingClientRect().height / 2 -
                        document.querySelector(".ui-ball").getBoundingClientRect().height / 9;
                gsap.timeline({
                    scrollTrigger: {
                        trigger: t.querySelector(".ui-track"),
                        start: `top+=${d} top`,
                        end: `top+=${d + o} top`,
                        scrub: !0,
                        onEnterBack: () => {
                            gsap.timeline({ onComplete: () => {} })
                                .set(e.querySelector(".ui-path__circle"), { display: "block" })
                                .set(e.querySelector(".section-slide-wrap"), { opacity: 0 });
                        },
                    },
                    onComplete: () => {
                        gsap.timeline({
                            onComplete: () => {
                                "undefined" != typeof lenis ? lenis.stop() : gsap.set("html", { overflow: "overlay" });
                            },
                        })
                            .set(e.querySelector(".ui-path__circle"), { display: "none" })
                            .set(e.querySelector(".section-slide-wrap"), { opacity: 1 });
                    },
                })
                    .to(t.querySelector(".ui-ball"), {
                        ease: "none",
                        duration: 0.45,
                        y: a,
                        overwrite: !0,
                        onStart: () => {
                            gsap.set(t.querySelector(".ui-track"), { alpha: 0 }),
                                gsap.set(t.querySelector(".ui-ball"), { alpha: 1 });
                        },
                        onReverseComplete: () => {
                            gsap.set(t.querySelector(".ui-track"), { alpha: 1 }),
                                gsap.set(t.querySelector(".ui-ball"), { alpha: 0 });
                        },
                    })
                    .to(t.querySelector(".ui-ball"), {
                        duration: n > 991 ? 0.7 : 0,
                        x: n > 991 ? "+=" + s : 0,
                        ease: "none",
                    })
                    .to(
                        t.querySelector(".ui-ball"),
                        { duration: n > 991 ? 0.7 : 0, y: n > 991 ? "+=" + l : 0, ease: "bounceSmall" },
                        "<"
                    );
            }
        }),
            document.querySelector(".resources-item").classList.add("active"),
            document.querySelector(".resources-item__name").classList.add("active"),
            document.querySelector(".resources-images__item").classList.add("active"),
            document.querySelector(".resources-header__item").classList.add("active"),
            ScrollTrigger.create({
                trigger: ".is-lessons",
                start: "top top",
                normalize: !0,
                once: !0,
                onEnter: () => {
                    const e = 1.5 * n,
                        t = document.querySelector(".resources").scrollWidth,
                        o = document.querySelector(".resources-lists").getBoundingClientRect().height,
                        r = t - n,
                        i = e + r + o,
                        a = parseInt((e / i) * 100),
                        s = parseInt((r / i) * 100),
                        l = parseInt(((2 * o) / i) * 100),
                        c = document.querySelector(".resources-header"),
                        u = document.querySelectorAll(".resources-list");
                    let d = 0;
                    gsap.timeline({
                        defaults: { ease: "none" },
                        scrollTrigger: {
                            trigger: ".resources",
                            pin: !0,
                            start: "top top",
                            end: () => "+" + i,
                            scrub: 3,
                        },
                    })
                        .to(".resources-arrow", { x: n <= 479 ? 0.78 * n : 0.84 * n, duration: a, stagger: a / 4 })
                        .to(".resources-track", { x: -r, duration: s })
                        .to(".resources-lists", {
                            yPercent: -100,
                            duration: l,
                            onUpdate: () => {
                                let e = c.getBoundingClientRect().top + c.getBoundingClientRect().height;
                                u.forEach((t, o) => {
                                    let n = t.getBoundingClientRect().top,
                                        r = t.getBoundingClientRect().top + t.getBoundingClientRect().height;
                                    e >= n &&
                                        e < r &&
                                        d != o &&
                                        ($(".resources-header__item").removeClass("active"),
                                        $(".resources-header__item").eq(o).addClass("active"),
                                        (d = o));
                                });
                            },
                        });
                    ScrollTrigger.refresh();
                },
            });
        let S = 0,
            B = 1,
            x = [0],
            q = 0,
            k = !0,
            E = 0,
            R = 0;
        async function F() {
            let e;
            const t = document.querySelector("#canvas");
            if (navigator.userAgentData && "Windows" === navigator.userAgentData.platform) {
                let t = await navigator.userAgentData.getHighEntropyValues(["platformVersion"]);
                e = parseInt(t.platformVersion.split(".")[0]);
            }
            let o = t.offsetWidth,
                n = o / 2,
                a = o / 15,
                s = Matter.Engine,
                l = Matter.Render,
                c = Matter.Runner,
                u = Matter.Body,
                d = Matter.Bodies,
                g = Matter.Common,
                p = Matter.Composite,
                h = Matter.World,
                m = Matter.Mouse,
                y = Matter.Events,
                v = Matter.MouseConstraint,
                f = s.create(),
                b = l.create({
                    element: t,
                    engine: f,
                    options: {
                        isSensor: !0,
                        width: t.offsetWidth,
                        height: t.offsetHeight,
                        background: "transparent",
                        wireframes: !1,
                    },
                });
            e >= 13 && (f.timing.timeScale = 0.35),
                (f.gravity.y = 1),
                (f.gravity.x = 0),
                (f.gravity.scale = 0.0025),
                ScrollTrigger.create({
                    trigger: ".is-interactive.wf-section",
                    start: "top top",
                    onEnter: () => {
                        ScrollTrigger.create({
                            trigger: ".height-section.is-interactive",
                            start: "top top",
                            end: "100% top",
                            onUpdate: (e) => {
                                f.gravity.x = (-1 * e.direction) / 2;
                            },
                        });
                    },
                }),
                ScrollTrigger.addEventListener("scrollEnd", () => {
                    f.gravity.x = 0;
                });
            let C = [];
            for (i = 0; i < 15; i++)
                C.push(
                    d.circle(n, n, a, {
                        density: 1e-5,
                        restitution: 0.5,
                        density: 0.05,
                        collisionFilter: { category: 3, mask: 3 },
                        render: { fillStyle: "#0C0B0B", strokeStyle: "white", lineWidth: 2 },
                    })
                );
            for (i = 0; i < 20; i++)
                C.push(
                    d.circle(n, n, a, {
                        density: 1e-5,
                        restitution: 0.5,
                        density: 0.05,
                        collisionFilter: { category: 4, mask: 5 },
                        render: { fillStyle: "#0C0B0B", strokeStyle: "white", lineWidth: 1 },
                    })
                );
            p.add(f.world, C);
            let w = m.create(b.canvas),
                S = v.create(f, { mouse: w, constraint: { stiffness: 0.2, render: { visible: !1 } } });
            S.mouse.element.removeEventListener("mousewheel", S.mouse.mousewheel),
                S.mouse.element.removeEventListener("DOMMouseScroll", S.mouse.mousewheel);
            for (
                y.on(S, "mousemove", function (e) {
                    let t = Matter.Query.point(C, e.mouse.position);
                    !(function (e, t) {
                        let o = 1e3 / 60 / e.timing.lastDelta;
                        for (let e = 0; e < t.length; e++) {
                            let n = t[e];
                            if (!n.isStatic) {
                                let e = 0.03 * n.mass * o;
                                u.applyForce(n, n.position, {
                                    x: (e + g.random() * e) * g.choose([1, -1]),
                                    y: -e + g.random() * -e,
                                });
                            }
                        }
                    })(f, t);
                }),
                    p.add(f.world, S),
                    l.run(b),
                    r = o / 2,
                    parts = [],
                    pegCount = 32,
                    TAU = 2 * Math.PI,
                    i = 0;
                i < pegCount;
                i++
            )
                (segment = TAU / pegCount),
                    (angle2 = (i / pegCount) * TAU + segment / 2),
                    (x2 = Math.cos(angle2)),
                    (y2 = Math.sin(angle2)),
                    (cx2 = x2 * r + o / 2),
                    (cy2 = y2 * r + o / 2),
                    (rect = B({
                        x: cx2,
                        y: cy2,
                        w: 0.01 * o,
                        h: 0.4 * o,
                        options: {
                            angle: angle2,
                            isStatic: !0,
                            density: 1,
                            render: { fillStyle: "transparent", strokeStyle: "transparent", lineWidth: 0 },
                        },
                    })),
                    parts.push(rect);
            function B({ x: e = 0, y: t = 0, w: o = 10, h: n = 10, options: r = {} } = {}) {
                return (
                    (body = d.rectangle(e, t, o, n, r)),
                    (function (...e) {
                        h.add(f.world, ...e);
                    })(body),
                    body
                );
            }
            let x = c.create();
            c.run(x, f);
            let q = 0;
            y.on(S, "startdrag", function (e) {
                q = 1;
            }),
                y.on(S, "enddrag", function (e) {
                    q = 0;
                });
            const k = document.querySelector("#canvas canvas");
            k.classList.add("sphere-canvas");
            var E = document.querySelector(".sphere-canvas");
            function R(e) {
                this.srcs = e;
            }
            (E.style = "clip-path: circle(50%); overflow: hidden;"),
                window.addEventListener("mousemove", (e) => {
                    var t, o, n;
                    "sphere-canvas" != e.toElement.getAttribute("class") &&
                        q &&
                        ((t = E),
                        (o = "mouseup"),
                        (n = document.createEvent("MouseEvents")).initEvent(o, !0, !0),
                        t.dispatchEvent(n));
                }),
                k.addEventListener(
                    "touchmove",
                    function (e) {
                        e.stopPropagation();
                        const t = this.getBoundingClientRect().x,
                            o = this.getBoundingClientRect().y,
                            n = e.touches[0].clientX,
                            r = e.touches[0].clientY,
                            i = t + this.getBoundingClientRect().width / 2,
                            a = o + this.getBoundingClientRect().height / 2,
                            s = this.getBoundingClientRect().width / 2;
                        if (!(Math.pow(n - i, 2) + Math.pow(r - a, 2) <= Math.pow(s, 2))) {
                            var l = new Event("touchstart");
                            E.dispatchEvent(l);
                        }
                    },
                    !1
                ),
                window.addEventListener("resize", () => {
                    (b.bounds.max.x = t.offsetWidth),
                        (b.bounds.max.y = t.offsetHeight),
                        (b.options.width = t.offsetWidth),
                        (b.options.height = t.offsetHeight),
                        (b.canvas.width = t.offsetWidth),
                        (b.canvas.height = t.offsetHeight);
                });
            let F = 0;
            const L = {},
                T = {},
                A = new AudioContext();
            let _ = 0;
            class $ {
                constructor(e) {
                    (this.src = e),
                        (this.gain = new GainNode(A)),
                        (this.panner = new PannerNode(A)),
                        this.panner.connect(this.gain),
                        this.gain.connect(A.destination),
                        this.load();
                }
                async load() {
                    let e = L[this.src];
                    if (!e) {
                        let t = T[this.src];
                        if (!t) {
                            const e = (async () => {
                                const e = await fetch(this.src),
                                    t = await e.arrayBuffer();
                                return delete T[this.src], t;
                            })();
                            (T[this.src] = e), (t = e);
                        }
                        const o = await t;
                        (e = await A.decodeAudioData(o)), (L[this.src] = e);
                    }
                    this._buffer = e;
                }
                set volume(e) {
                    this.gain.gain.value = e;
                }
                get volume() {
                    return this.gain.gain.value || 0;
                }
                play() {
                    if (!this._buffer) return;
                    const e = new AudioBufferSourceNode(A, { buffer: this._buffer });
                    (e.detune.value = this.volume * this.volume * 600 - 600),
                        (e.onended = () => {
                            this._onEnd && this._onEnd();
                        }),
                        (this.panner.positionX.value = _),
                        (this.panner.positionZ.value = 0.5),
                        e.connect(this.panner),
                        e.start();
                }
                onEnd(e) {
                    this._onEnd = e;
                }
            }
            const M = {};
            function O(e) {
                let t = M[e];
                if (t) {
                    const e = t.pop();
                    if (e) return e;
                }
                const o = new $(e);
                return (
                    o.onEnd(() => {
                        !(function (e) {
                            let t = M[e.src];
                            t || (M[e.src] = t = []);
                            t.push(e);
                        })(o);
                    }),
                    o
                );
            }
            function D(e, t) {
                (this.channels = []), (this.num = t), (this.index = 0);
                for (var o = 0; o < t; o++) this.channels.push(new R(e));
            }
            (R.prototype.play = function (e) {
                if (F >= 2) return;
                ++F;
                const t = O(this.srcs[Math.floor(Math.random() * this.srcs.length)]);
                (t.volume = e), t.play();
                const o = [100, 400];
                setTimeout(
                    () => {
                        --F;
                    },
                    o[0] + Math.random() * o[1]
                );
            }),
                (D.prototype.play = function (e) {
                    const t = this.index;
                    this.channels[t].play(e), this.index++, this.index >= this.num && (this.index = 0);
                }),
                (musicCollision = new D(["https://cdn.zajno.com/dev/motion/sounds/sound_2_filter-2-cut.mp3"], 2));
            diff = function (e, t) {
                return e.filter((e) => !t.includes(e)).concat(t.filter((t) => !e.includes(t)));
            };
            let P = !1;
            y.on(f, "collisionStart", function (e) {
                if (P) {
                    var t = e.pairs;
                    if (0 === t.length) return;
                    const n = 1.5;
                    let r = 0;
                    t.map((e) => {
                        if (e.bodyA.isStatic || e.bodyB.isStatic) return;
                        const t = Matter.Vector.magnitude(e.collision.penetration);
                        return t > n ? (t > r && ((r = t), (_ = e.bodyA.position.x + e.bodyB.position.x)), t) : null;
                    }).filter(Boolean);
                    const i = r > 0 ? Math.min(1, r / 10) : 0;
                    i > 0 && ((_ = (_ / o - 1) / 2), musicCollision.play(i));
                }
            }),
                document.querySelector(".sound-icon-wrap").addEventListener("click", function () {
                    P = this.querySelector(".sound-btn-mute").classList.contains("is-active");
                });
        }
        $(".resources-item").mouseenter(function () {
            $(".resources-item").removeClass("active"),
                $(".resources-item__name").removeClass("active"),
                $(this).addClass("active"),
                $(this).find(".resources-item__name").addClass("active"),
                (q = $(this).closest(".resources-item").index()),
                (k = !0),
                (E = $(this).closest(".resources-list").index()),
                R != E && ((x = []), $(".resources-images__item").removeClass("active"), (S = -6)),
                x.includes(q)
                    ? (x.push(q), x.splice(x.indexOf(q), 1), (k = !1))
                    : (x.push(q), -6 == S ? (S = 0) : (S -= 3)),
                B++,
                x.length > 3 && ($(".resources-images__item").eq(x[0]).removeClass("active"), x.shift()),
                k &&
                    ($(".resources-images__list")
                        .eq(E)
                        .find(".resources-images__item")
                        .eq(q)
                        .css("transform", `rotate(${S}deg)`),
                    $(".resources-images__list").eq(E).find(".resources-images__item").eq(q).addClass("active")),
                $(".resources-images__list").eq(E).find(".resources-images__item").eq(q).css("z-index", B),
                (R = $(this).closest(".resources-list").index());
        }),
            document.querySelectorAll(".section-slide-wrap").forEach((e) => {
                const t = e.querySelectorAll(".section-slide-speed"),
                    o = e.querySelector("video");
                t.forEach((e) => {
                    e.addEventListener("click", () => {
                        const t = e.getAttribute("data-speed");
                        o.playbackRate = t;
                    });
                });
            });
        const L = document.querySelector(".height-section.is-interactive").scrollWidth - n;
        gsap.to(".height-section.is-interactive", {
            x: -1 * L,
            ease: "sine.out",
            scrollTrigger: {
                trigger: ".height-section.is-interactive",
                pin: !0,
                anticipatePin: 1,
                scrub: 1,
                start: "top top",
                end: () => "+=" + L,
            },
        }),
            ScrollTrigger.create({
                trigger: ".height-section.is-interactive",
                start: "top bottom",
                once: !0,
                onEnter: () => {
                    F();
                },
            });
        let T = document.querySelector(".nav"),
            A = 0,
            _ = document.querySelector(".nav"),
            M = 0;
        const O = document.querySelector("#resources");
        let D =
            O.scrollWidth -
            n +
            O.scrollWidth -
            n +
            document.querySelector(".resources-lists").getBoundingClientRect().height;
        n <= 991 && (D *= 2);
        let P = 0,
            W = 0;
        function I() {
            gsap.to(".logo-eye-dark", { alpha: 1, duration: 0.4 }),
                gsap.to(".logo-eye-light", { alpha: 0, duration: 0.4 }),
                gsap.to("#logo-wrap", {
                    borderColor: "#FDFCFA",
                    backgroundColor: "#0C0B0B",
                    color: "#FDFCFA",
                    duration: 0.4,
                }),
                gsap.to(".toggle-span", { backgroundColor: "#FDFCFA", duration: 0.4 }),
                gsap.to("#menu-toggle", {
                    borderColor: "#FDFCFA",
                    backgroundColor: "#0C0B0B",
                    color: "#FDFCFA",
                    duration: 0.4,
                }),
                gsap.to(".eye-bg-sections", { backgroundColor: "#0C0B0B", duration: 0.4 }),
                gsap.to(".breadcrumbs-wrap", { alpha: 0, duration: 0.4 });
        }
        function X() {
            gsap.to(".logo-eye-light", { alpha: 1, duration: 0.4 }),
                gsap.to(".logo-eye-dark", { alpha: 0, duration: 0.4 }),
                gsap.to("#logo-wrap", {
                    borderColor: "#0C0B0B",
                    backgroundColor: "#FDFCFA",
                    color: "#0C0B0B",
                    duration: 0.4,
                }),
                gsap.to(".toggle-span", { backgroundColor: "#0C0B0B", duration: 0.4 }),
                gsap.to("#menu-toggle", {
                    borderColor: "#0C0B0B",
                    backgroundColor: "#FDFCFA",
                    color: "#0C0B0B",
                    duration: 0.4,
                }),
                gsap.to(".eye-bg-sections", { backgroundColor: "#FDFCFA", duration: 0.4 }),
                gsap.to(".breadcrumbs-wrap", { alpha: 0, duration: 0.4 });
        }
        function H() {
            gsap.to(".logo-eye-light", { alpha: 1, duration: 0.4 }),
                gsap.to(".logo-eye-dark", { alpha: 0, duration: 0.4 }),
                gsap.to(".breadcrumbs-wrap", { alpha: 1, duration: 0.4 }),
                gsap.to("#breadcrumbs-wrap .breadcrumb-item", { alpha: 0, duration: 0.4 });
            const e = document.querySelectorAll("#breadcrumbs-wrap .breadcrumb-item")[A];
            gsap.to(e, { alpha: 1, duration: 0.4, overwrite: !0 }),
                gsap.to("#logo-wrap", {
                    borderColor: "#0C0B0B",
                    backgroundColor: getComputedStyle(e).backgroundColor,
                    color: "#0C0B0B",
                    duration: 0.4,
                }),
                gsap.to(".toggle-span", { backgroundColor: "#0C0B0B", duration: 0.4 }),
                gsap.to("#menu-toggle", {
                    borderColor: "#0C0B0B",
                    backgroundColor: getComputedStyle(e).backgroundColor,
                    color: "#0C0B0B",
                    duration: 0.4,
                }),
                gsap.to(".eye-bg-sections", { backgroundColor: getComputedStyle(e).backgroundColor, duration: 0.4 });
        }
        function z() {
            T.classList.contains("nav-dark")
                ? I()
                : T.classList.contains("nav-light")
                  ? X()
                  : T.classList.contains("nav-color") && H();
        }
        function U() {
            gsap.to(".sound-icon-wrap", {
                borderColor: "#FDFCFA",
                backgroundColor: "#0C0B0B",
                color: "#FDFCFA",
                duration: 0.4,
            });
        }
        function Y() {
            gsap.to(".sound-icon-wrap", {
                borderColor: "#0C0B0B",
                backgroundColor: "#FDFCFA",
                color: "#0C0B0B",
                duration: 0.4,
            });
        }
        function V() {
            _.classList.contains("nav-dark")
                ? U()
                : _.classList.contains("nav-light")
                  ? Y()
                  : _.classList.contains("nav-color") && N();
        }
        function N() {
            const e = document.querySelectorAll("#breadcrumbs-wrap .breadcrumb-item")[M];
            gsap.to(".sound-icon-wrap", {
                borderColor: "#0C0B0B",
                backgroundColor: getComputedStyle(e).backgroundColor,
                color: "#0C0B0B",
                duration: 0.4,
            });
        }
        document.querySelectorAll(".nav").forEach((e, t) => {
            const o = e.classList;
            e.contains(O) && (P += D),
                o.contains("nav-dark") &&
                    (ScrollTrigger.create({
                        trigger: e,
                        start: `top+=${W}px top+=1px`,
                        end: `bottom+=${P}px top+=1px`,
                        invalidateOnRefresh: !0,
                        onEnter: () => {
                            (T = e), I();
                        },
                        onEnterBack: () => {
                            (T = e), I();
                        },
                    }),
                    ScrollTrigger.create({
                        trigger: e,
                        start: `top+=${W}px bottom-=90px`,
                        end: `bottom+=${P}px bottom-=90px`,
                        invalidateOnRefresh: !0,
                        onEnter: () => {
                            (_ = e), (M = t), U();
                        },
                        onEnterBack: () => {
                            (_ = e), (M = t), U();
                        },
                    })),
                o.contains("nav-light") &&
                    (ScrollTrigger.create({
                        trigger: e,
                        start: `top+=${W}px top+=1px`,
                        end: `bottom+=${P}px top+=1px`,
                        invalidateOnRefresh: !0,
                        onEnter: () => {
                            (T = e), X();
                        },
                        onEnterBack: () => {
                            (T = e), X();
                        },
                    }),
                    ScrollTrigger.create({
                        trigger: e,
                        start: `top+=${W}px bottom-=90px`,
                        end: `bottom+=${P}px bottom-=90px`,
                        invalidateOnRefresh: !0,
                        onEnter: () => {
                            (_ = e), (M = t), Y();
                        },
                        onEnterBack: () => {
                            (_ = e), (M = t), Y();
                        },
                    })),
                e.contains(O) && (W += D),
                e.querySelectorAll(".nav-inner").forEach((e) => {
                    const t = e.classList;
                    t.contains("nav-dark") &&
                        (ScrollTrigger.create({
                            trigger: e,
                            start: `top+=${W}px top+=1px`,
                            end: `bottom+=${P}px top+=1px`,
                            invalidateOnRefresh: !0,
                            onEnter: () => {
                                I();
                            },
                            onEnterBack: () => {
                                I();
                            },
                            onLeave: () => {
                                z();
                            },
                            onLeaveBack: () => {
                                z();
                            },
                        }),
                        ScrollTrigger.create({
                            trigger: e,
                            start: `top+=${W}px bottom-=90px`,
                            end: `bottom+=${P}px bottom-=90px`,
                            invalidateOnRefresh: !0,
                            onEnter: () => {
                                U();
                            },
                            onEnterBack: () => {
                                U();
                            },
                            onLeave: () => {
                                V();
                            },
                            onLeaveBack: () => {
                                V();
                            },
                        })),
                        t.contains("nav-light") &&
                            (ScrollTrigger.create({
                                trigger: e,
                                start: `top+=${W}px top+=1px`,
                                end: `bottom+=${P}px top+=1px`,
                                invalidateOnRefresh: !0,
                                onEnter: () => {
                                    X();
                                },
                                onEnterBack: () => {
                                    X();
                                },
                                onLeave: () => {
                                    z();
                                },
                                onLeaveBack: () => {
                                    z();
                                },
                            }),
                            ScrollTrigger.create({
                                trigger: e,
                                start: `top+=${W}px bottom-=90px`,
                                end: `bottom+=${P}px bottom-=90px`,
                                invalidateOnRefresh: !0,
                                onEnter: () => {
                                    Y();
                                },
                                onEnterBack: () => {
                                    Y();
                                },
                                onLeave: () => {
                                    V();
                                },
                                onLeaveBack: () => {
                                    V();
                                },
                            }));
                });
        }),
            document.querySelectorAll(".nav.nav-color").forEach((e, t) => {
                ScrollTrigger.create({
                    trigger: e,
                    start: "top top+=1px",
                    end: "bottom top+=1px",
                    invalidateOnRefresh: !0,
                    onEnter: () => {
                        (T = e), (A = t), H();
                    },
                    onEnterBack: () => {
                        (T = e), (A = t), H();
                    },
                }),
                    ScrollTrigger.create({
                        trigger: e,
                        start: "top bottom-=90px",
                        end: "bottom bottom-=90px",
                        invalidateOnRefresh: !0,
                        onEnter: () => {
                            (_ = e), (M = t), N();
                        },
                        onEnterBack: () => {
                            (_ = e), (M = t), N();
                        },
                    });
            });
        const j = document.querySelector(".nav-menu"),
            G = document.querySelector(".nav-track"),
            Q = document.getElementById("menu-toggle"),
            Z = document.querySelectorAll(".nav-link");
        Q.addEventListener("click", function () {
            Q.classList.toggle("opening"),
                Q.classList.contains("opening")
                    ? ("undefined" != typeof lenis ? lenis.stop() : gsap.set("html", { overflow: "hidden" }),
                      gsap.to(".logo-eye-dark", { alpha: 1, duration: 0.4 }),
                      gsap.to(".logo-eye-light", { alpha: 0, duration: 0.4 }),
                      gsap.to("#logo-wrap", {
                          borderColor: "#FDFCFA",
                          backgroundColor: "#0C0B0B",
                          color: "#FDFCFA",
                          duration: 0.4,
                      }),
                      gsap.to(".toggle-span", { backgroundColor: "#FDFCFA", duration: 0.4 }),
                      gsap.to("#menu-toggle", {
                          borderColor: "#FDFCFA",
                          backgroundColor: "#0C0B0B",
                          color: "#FDFCFA",
                          duration: 0.4,
                      }),
                      gsap.to(".eye-bg-sections", { backgroundColor: "#0C0B0B", duration: 0.4 }),
                      gsap.to(".breadcrumbs-wrap", { alpha: 0, duration: 0.4 }))
                    : ("undefined" != typeof lenis ? lenis.stop() : gsap.set("html", { overflow: "overlay" }),
                      T.classList.contains("nav-dark")
                          ? I()
                          : T.classList.contains("nav-light")
                            ? X()
                            : T.classList.contains("nav-color") && H());
        }),
            Z.forEach((e) => {
                e.addEventListener("click", function () {
                    Q.click();
                });
            }),
            j.addEventListener("wheel", (e) => {
                e.preventDefault(), e.stopPropagation();
                let o = t && e.deltaX < 10 ? 10 * e.deltaX : e.deltaX,
                    n = t && e.deltaY < 10 ? 10 * e.deltaY : e.deltaY;
                G.scrollLeft = G.scrollLeft + o + n;
            }),
            document.querySelector("#link1").addEventListener("click", function () {
                gsap.to(s, { x: 0, duration: 0.2, delay: 0.2, overwrite: !0 });
            });
    }),
    window.addEventListener("pageshow", function (e) {
        e.persisted && window.location.reload();
    }),
    (window.onbeforeunload = function (e) {
        const t = e.target.activeElement.href;
        t.includes("mailto") ||
            t.includes("tel") ||
            (gsap.to("body", { opacity: 0, duration: 0.3 }), window.scrollTo(0, 0));
    });